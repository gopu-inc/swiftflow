// ======================================================
// [SECTION] TEST DE SWIFTFLOW - SANS MOTS-CLÉS RÉSERVÉS
// ======================================================

print("=== Début des tests SwiftFlow ===");

// Test 1: Variables et types
print("\n=== Test 1: Variables et types ===");
var x = 10;
var y = 3.14;
var name = "SwiftFlow";
var active = true;

print("x =", x);
print("y =", y);
print("name =", name);
print("active =", active);

// Test 2: Opérations arithmétiques
print("\n=== Test 2: Opérations arithmétiques ===");
var a = 15;
var b = 4;

print("a + b =", a + b);
print("a - b =", a - b);
print("a * b =", a * b);
print("a / b =", a / b);
print("a % b =", a % b);

// Test 3: Opérations de comparaison
print("\n=== Test 3: Comparaisons ===");
print("a == b ?", a == b);
print("a != b ?", a != b);
print("a > b ?", a > b);
print("a < b ?", a < b);
print("a >= b ?", a >= b);
print("a <= b ?", a <= b);

// Test 4: Opérations logiques
print("\n=== Test 4: Logique ===");
var condition1 = true;
var condition2 = false;

print("condition1 && condition2 =", condition1 && condition2);
print("condition1 || condition2 =", condition1 || condition2);
print("!condition1 =", !condition1);

// Test 5: Structures de contrôle - If/Else
print("\n=== Test 5: If/Else ===");
if (x > 5) {
    print("x est plus grand que 5");
} else {
    print("x est 5 ou moins");
}

// Test 6: Boucle while
print("\n=== Test 6: Boucle While ===");
var counter = 1;
while (counter <= 3) {
    print("Iteration", counter);
    counter = counter + 1;
}

// Test 7: Boucle for classique
print("\n=== Test 7: Boucle For ===");
for (var i = 1; i <= 3; i = i + 1) {
    print("For loop iteration", i);
}

// Test 8: Fonctions
print("\n=== Test 8: Fonctions ===");

// Déclaration de fonction
func add(a, b) {
    return a + b;
}

func factorial(n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

// Appel de fonctions
var sum = add(5, 3);
print("5 + 3 =", sum);
print("5! =", factorial(5));

// Test 9: Fonctions récursives
print("\n=== Test 9: Fibonacci récursif ===");
func fibonacci(n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

print("Fibonacci(7) =", fibonacci(7));

// Test 10: Tableaux (arrays)
print("\n=== Test 10: Tableaux ===");
var fruits = ["apple", "banana", "orange"];
print("Fruits:", fruits);

// Accès aux éléments avec boucle for classique
print("Éléments du tableau:");
for (var idx = 0; idx < 3; idx = idx + 1) {
    print("  fruits[", idx, "] =", fruits[idx]);
}

// Test 11: Maps (objets)
print("\n=== Test 11: Maps (Objets) ===");
var person = {
    "name": "Alice",
    "age": 25,
    "city": "Paris"
};

print("Personne:", person);
print("Nom:", person["name"]);
print("Age:", person["age"]);

// Test 12: Conditions multiples
print("\n=== Test 12: Conditions multiples ===");
var day = 3;
if (day == 1) {
    print("Lundi");
} else if (day == 2) {
    print("Mardi");
} else if (day == 3) {
    print("Mercredi");
} else if (day == 4) {
    print("Jeudi");
} else if (day == 5) {
    print("Vendredi");
} else {
    print("Weekend");
}

// Test 13: Gestion d'erreurs simple
print("\n=== Test 13: Gestion d'erreurs ===");
func safe_divide(a, b) {
    if (b == 0) {
        return "ERREUR: Division par zéro!";
    }
    return a / b;
}

var result1 = safe_divide(10, 2);
print("10 / 2 =", result1);

var result2 = safe_divide(10, 0);
print("10 / 0 =", result2);

// Test 14: Classes
print("\n=== Test 14: Classes ===");

class Animal {
    var animal_name;
    var animal_age;
    
    func init(n, a) {
        animal_name = n;
        animal_age = a;
    }
    
    func speak() {
        print(animal_name, "fait un son");
    }
    
    func get_info() {
        return animal_name + " (" + animal_age + " ans)";
    }
}

// Création d'instance
var my_animal = Animal("Generic", 3);
my_animal.speak();
print("Animal:", my_animal.get_info());

// Test 15: Opérations de chaînes
print("\n=== Test 15: Chaînes de caractères ===");
var greeting = "Hello";
var target = "World";
var message = greeting + " " + target + "!";
print(message);

// Test 16: Maths avec boucle for classique
print("\n=== Test 16: Calculs mathématiques ===");
var numbers = [1, 2, 3, 4, 5];
var total_sum = 0;

// Boucle for classique au lieu de for...in
for (var i = 0; i < 5; i = i + 1) {
    total_sum = total_sum + numbers[i];
}

print("Nombres:", numbers);
print("Somme:", total_sum);
print("Moyenne:", total_sum / 5);

// Test 17: Constantes
print("\n=== Test 17: Constantes ===");
const MAX_SIZE = 100;
const APP_NAME = "SwiftFlow Test";
print("MAX_SIZE =", MAX_SIZE);
print("APP_NAME =", APP_NAME);

// Test 18: Portée des variables (sans mot-clé 'global')
print("\n=== Test 18: Portée ===");
var global_var = "variable_globale"; // Pas 'global' qui est réservé

func test_scope() {
    var local_var = "variable_locale";
    print("Dans fonction: global_var =", global_var, ", local_var =", local_var);
}

test_scope();

// Test 19: Expressions conditionnelles complexes
print("\n=== Test 19: Conditions complexes ===");
var user_age = 25; // Pas 'age' qui pourrait être réservé
var has_license = true;

if (user_age >= 18 && has_license) {
    print("Peut conduire");
} else {
    print("Ne peut pas conduire");
}

// Test 20: Boucles imbriquées
print("\n=== Test 20: Boucles imbriquées ===");
for (var i = 1; i <= 3; i = i + 1) {
    for (var j = 1; j <= 3; j = j + 1) {
        print("i =", i, ", j =", j, ", produit =", i * j);
    }
}

// Test 21: Récursion multiple
print("\n=== Test 21: Récursion multiple ===");
func power(base, exp) {
    if (exp == 0) {
        return 1;
    }
    return base * power(base, exp - 1);
}

print("2^5 =", power(2, 5));

// Test 22: Manipulation de tableaux 2D
print("\n=== Test 22: Tableaux 2D ===");
var matrix = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
];

print("Matrice 3x3:");
for (var row = 0; row < 3; row = row + 1) {
    var row_str = "  [";
    for (var col = 0; col < 3; col = col + 1) {
        row_str = row_str + matrix[row][col];
        if (col < 2) {
            row_str = row_str + ", ";
        }
    }
    row_str = row_str + "]";
    print(row_str);
}

// Test 23: Performance
print("\n=== Test 23: Performance ===");
func sum_up_to(n) {
    var total = 0;
    for (var i = 1; i <= n; i = i + 1) {
        total = total + i;
    }
    return total;
}

var limit = 100; // Pas 'n' qui pourrait être ambigu
print("Somme des nombres de 1 à", limit, "=", sum_up_to(limit));

// Test 24: Opérateurs unaires
print("\n=== Test 24: Opérateurs unaires ===");
var number = 5; // Pas 'num' qui pourrait être réservé
print("number =", number);
number = number + 1;
print("number++ =", number);
number = number - 1;
print("number-- =", number);

// Test 25: Simulation de switch
print("\n=== Test 25: Évaluation de notes ===");
var student_grade = 85;
var letter_grade = "";

if (student_grade >= 90) {
    letter_grade = "A";
} else if (student_grade >= 80) {
    letter_grade = "B";
} else if (student_grade >= 70) {
    letter_grade = "C";
} else if (student_grade >= 60) {
    letter_grade = "D";
} else {
    letter_grade = "F";
}

print("Note:", student_grade, "=>", letter_grade);

// ======================================================
// [SECTION] RÉCAPITULATIF
// ======================================================
print("\n=== Récapitulatif des tests ===");
print("✓ Variables et types de base");
print("✓ Toutes les opérations (+, -, *, /, %, ==, !=, >, <, >=, <=, &&, ||, !)");
print("✓ Structures de contrôle (if/else, while, for)");
print("✓ Fonctions et récursion");
print("✓ Tableaux et maps");
print("✓ Classes et méthodes");
print("✓ Constantes");
print("✓ Portée des variables");
print("✓ Boucles imbriquées");
print("✓ Performance");

print("\n=== Tous les tests sont terminés avec succès! ===");
print("SwiftFlow fonctionne correctement!");

// Fonction finale démo
print("\n=== Démo finale ===");
func demo_final() {
    // Calculatrice simple
    func calculator(op, x, y) {
        if (op == "+") {
            return x + y;
        } else if (op == "-") {
            return x - y;
        } else if (op == "*") {
            return x * y;
        } else if (op == "/") {
            if (y != 0) {
                return x / y;
            } else {
                return "Division par zéro";
            }
        } else {
            return "Opérateur invalide";
        }
    }
    
    print("Calculatrice:");
    print("5 + 3 =", calculator("+", 5, 3));
    print("10 - 4 =", calculator("-", 10, 4));
    print("6 * 7 =", calculator("*", 6, 7));
    print("15 / 3 =", calculator("/", 15, 3));
    print("8 / 0 =", calculator("/", 8, 0));
}

// Exécuter la démo
demo_final();
print("\n=== Fin du test SwiftFlow ===");